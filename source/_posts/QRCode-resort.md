---
title: CTF 二维码行列重排
date: 2019-12-30 11:45
tags: CTF
categories: 
---

## 思路
打死出题人系列：Flag 生成 ACSII 字符文本，文本使用01替换后进行行列重排。

<!-- more -->

## 文本预处理

```
生成 ACSII 字符：
qrencode -t ASCII 'flag:jbcool' > flag.txt
删除所有的空白行：
sed -i '' -e '/^[  ]*$/d' flag.txt
删除前 8 个空格
sed -i '' -e 's/^        //g' flag.txt
删除后 8 个空格
sed -i '' -e 's/        $//g' flag.txt
替换井号为 1
sed -i '' -e 's/#/1/g' flag.txt
替换空格为 0
sed -i '' -e 's/ /0/g' flag.txt
字符之间添加空格：
sed -i '' -e 's/\(.\)/\1 /g' flag.txt
```

## 批处理脚本
vim resort.sh

```
chac=$(wc -c flag.txt | awk '{print $1}')
line=$(wc -l flag.txt | awk '{print $1}')
line=$(echo  $chac/$line-1 | bc) #行数减一是有一个换行符
line=$(echo  $line/2 | bc) #行数除二是中间有空格

if [ ! -f "sort.txt" ]; then #sort.txt 文件处理
	touch "sort.txt"
else
	rm "sort.txt"
fi 

for ((i=1;i<=$line;i++))
do
	cut -d ' ' -f$i flag.txt > $i.txt
	tr "\n" " "  < $i.txt > $i-bak.txt
	rm $i.txt
	echo `cat $i-bak.txt` >> sort.txt
	rm $i-bak.txt
done

sed -i '' -e 's/ //g' sort.txt
```

```
chmod +x resort.sh
./resort
```

## 原始码：

```
1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 1 1 0 0 1 1 1 1 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
1 1 0 0 0 0 0 0 0 0 0 0 1 1 0 0 1 1 1 1 0 0 1 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 1 
1 1 0 0 1 1 1 1 1 1 0 0 1 1 0 0 1 1 1 1 0 0 0 0 1 1 0 0 1 1 0 0 1 1 1 1 1 1 0 0 1 1 
1 1 0 0 1 1 1 1 1 1 0 0 1 1 0 0 1 1 0 0 0 0 0 0 1 1 0 0 1 1 0 0 1 1 1 1 1 1 0 0 1 1 
1 1 0 0 0 0 0 0 0 0 0 0 1 1 0 0 1 1 0 0 0 0 1 1 1 1 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 1 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
1 1 1 1 0 0 1 1 0 0 0 0 1 1 1 1 0 0 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 0 0 1 1 1 1 0 0 
0 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0 1 1 1 1 1 1 0 0 0 0 1 1 0 0 1 1 1 1 0 0 1 1 1 1 1 1 
1 1 0 0 0 0 1 1 1 1 0 0 1 1 1 1 1 1 0 0 1 1 0 0 1 1 0 0 0 0 1 1 0 0 0 0 1 1 0 0 1 1 
0 0 1 1 0 0 0 0 0 0 1 1 0 0 1 1 0 0 0 0 0 0 1 1 0 0 0 0 1 1 1 1 1 1 1 1 0 0 1 1 0 0 
0 0 1 1 0 0 1 1 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 1 1 0 0 0 0 0 0 1 1 0 0 0 0 1 1 1 1 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 1 1 1 1 0 0 1 1 1 1 1 1 0 0 1 1 0 0 0 0 1 1 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 1 1 0 0 1 1 1 1 0 0 
1 1 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 1 1 1 1 0 0 0 0 1 1 1 1 0 0 0 0 0 0 1 1 
1 1 0 0 1 1 1 1 1 1 0 0 1 1 0 0 0 0 0 0 0 0 1 1 0 0 1 1 0 0 0 0 1 1 0 0 0 0 1 1 0 0 
1 1 0 0 1 1 1 1 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 0 0 0 0 0 0 1 1 1 1 1 1 0 0 1 1 1 1 
1 1 0 0 1 1 1 1 1 1 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1 1 0 0 1 1 1 1 1 1 0 0 0 0 1 1 
1 1 0 0 0 0 0 0 0 0 0 0 1 1 0 0 1 1 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 0 0 0 0 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 1 1 0 0 
```

## 重排后：

```
11111101010001111111
11111101010001111111
10000101001101000001
10000101001101000001
10110100100001011101
10110100100001011101
10110101010101011101
10110101010101011101
10110100010001011101
10110100010001011101
10000100101001000001
10000100101001000001
11111101010101111111
11111101010101111111
00000001011100000000
00000001011100000000
01111110110111001011
01111110110111001011
11100011100001000010
11100011100001000010
00000111110010001000
00000111110010001000
11001010001010110010
11001010001010110010
10111110010100100100
10111110010100100100
00000000100011010110
00000000100011010110
11111101001011000001
11111101001011000001
10000101111011101110
10000101111011101110
10110101101101111100
10110101101101111100
10110100001010001110
10110100001010001110
10110101110001000000
10110101110001000000
10000101101101011001
10000101101101011001
11111100110110101100
11111100110110101100
```
