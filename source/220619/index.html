<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/index.css" type="text/css" />
  <script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.js"></script>
  <script src="https://cdn.staticfile.org/html2canvas/0.5.0-beta4/html2canvas.js"></script>
</head>

<body>
  <div id="title">2022 ç‰¹è·‘æ—å…¨å›½ 10K æ’ä½èµ›æˆç»©</div>

  <div id="button-pref">
    <button onclick="setData('data/overall.json', 'å…¨ä½“æ’å')">å…¨ä½“æ’å</button>
    <button onclick="setData('data/man.json', 'ç”·å­æ’å')">ç”·å­æ’å</button>
    <button onclick="setData('data/woman.json', 'å¥³å­æ’å')">å¥³å­æ’å</button>
  </div>

  <table>
    <tr>
    </tr>
  </table>
  <script>
    window.onload = () => {
      $('title').text('æˆç»©æŸ¥è¯¢');
      setData('data/overall.json', 'å…¨ä½“æ’å');
    }

    setData = (url, type) => {
      $.getJSON(url, result => {
        medal = {1: "ğŸ…ï¸", 2: "ğŸ¥ˆ", 3: "ğŸ¥‰"};
        text = ['<tr>', `<td colspan="6">${type}</td>`, '</tr>', '<tr>', `<th>æ’å</th>`, '<th>å·ç </th>',
            '<th>åå­—</th>', '<th>æ€§åˆ«</th>', '<th>è®¡æ—¶æ—¶é—´</th>', '<th>é…é€Ÿ</th>', '</tr>'];
        for (let index = 0; index < result.length; index++) {
          data = result[index];
          text.push('<tr>');
          text.push(`<td>${medal[data['rank']] || `${data['rank']}`}</td>`);
          text.push(`<td>${data['bib_no']}</td>`);
          text.push(`<td><a href="./certificate.html?type=${url}&index=${index}">${data['name']}</a></td>`);
          text.push(`<td>${data['gender']}</td>`);
          text.push(`<td>${data['time']}</td>`);
          text.push(`<td>${data['pace']}</td>`);
          text.push('</tr>');
        }
        $('tbody').empty().append(text.join('\n'));
      })
    }
  </script>
</body>

</html>